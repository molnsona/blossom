<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlosSOM: src/embedsom_cuda_projection.cu File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlosSOM
   </div>
   <div id="projectbrief">Interactive dimensionality reduction on large datasets (EmbedSOM and FLOWER combined)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">embedsom_cuda_projection.cu File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="embedsom__cuda_8h_source.html">embedsom_cuda.h</a>&quot;</code><br />
<code>#include &quot;cooperative_groups.h&quot;</code><br />
<code>#include &quot;cooperative_groups/reduce.h&quot;</code><br />
<code>#include &quot;cuda_runtime.h&quot;</code><br />
<code>#include &quot;device_launch_parameters.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for embedsom_cuda_projection.cu:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu__incl.png" border="0" usemap="#asrc_2embedsom__cuda__projection_8cu" alt=""/></div>
<map name="asrc_2embedsom__cuda__projection_8cu" id="asrc_2embedsom__cuda__projection_8cu">
<area shape="rect" title=" " alt="" coords="723,5,947,32"/>
<area shape="rect" href="embedsom__cuda_8h.html" title=" " alt="" coords="309,87,441,114"/>
<area shape="rect" title=" " alt="" coords="626,244,737,271"/>
<area shape="rect" title=" " alt="" coords="761,87,908,114"/>
<area shape="rect" title=" " alt="" coords="933,80,1067,121"/>
<area shape="rect" title=" " alt="" coords="1091,87,1279,114"/>
<area shape="rect" title=" " alt="" coords="5,169,80,196"/>
<area shape="rect" title=" " alt="" coords="235,244,296,271"/>
<area shape="rect" title=" " alt="" coords="155,169,213,196"/>
<area shape="rect" title=" " alt="" coords="237,169,315,196"/>
<area shape="rect" title=" " alt="" coords="340,169,409,196"/>
<area shape="rect" title=" " alt="" coords="434,169,489,196"/>
<area shape="rect" href="cuda__structs_8cuh.html" title=" " alt="" coords="513,169,636,196"/>
<area shape="rect" title=" " alt="" coords="469,244,523,271"/>
<area shape="rect" title=" " alt="" coords="548,244,601,271"/>
</map>
</div>
</div>
<p><a href="embedsom__cuda__projection_8cu_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structEmbedSOMConstants.html">EmbedSOMConstants&lt; F &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSharedNeighborStorage.html">SharedNeighborStorage&lt; F &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper structure to transform neighbor distances to scores.  <a href="structSharedNeighborStorage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNeighborScoreStorage.html">NeighborScoreStorage&lt; F &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper structure to help transform neighbor distances to scores.  <a href="structNeighborScoreStorage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structRectangleIndexer.html">RectangleIndexer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type tag for indexing by small rectangles.  <a href="structRectangleIndexer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3de890e3fb681b02368e411be8c1b2cd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a3de890e3fb681b02368e411be8c1b2cd">_CG_ABI_EXPERIMENTAL</a></td></tr>
<tr class="separator:a3de890e3fb681b02368e411be8c1b2cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89700ffad5ff8c1c57a1226a1cbcdd95"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a89700ffad5ff8c1c57a1226a1cbcdd95">DOIT</a>(X)</td></tr>
<tr class="separator:a89700ffad5ff8c1c57a1226a1cbcdd95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a876c79c4c56f79e98a0b8bfa28cb347a"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a876c79c4c56f79e98a0b8bfa28cb347a"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ F&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a876c79c4c56f79e98a0b8bfa28cb347a">warpReduceSum</a> (F val)</td></tr>
<tr class="memdesc:a876c79c4c56f79e98a0b8bfa28cb347a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sum a value across the warp.  <a href="embedsom__cuda__projection_8cu.html#a876c79c4c56f79e98a0b8bfa28cb347a">More...</a><br /></td></tr>
<tr class="separator:a876c79c4c56f79e98a0b8bfa28cb347a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7135457ca312289c340f0fd05a53f6de"><td class="memTemplParams" colspan="2">template&lt;typename F , typename ArrayF &gt; </td></tr>
<tr class="memitem:a7135457ca312289c340f0fd05a53f6de"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a7135457ca312289c340f0fd05a53f6de">readAligned</a> (F *const __restrict__ dst, const F *const __restrict__ src, const <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__ neighbors, const uint32_t n, const uint32_t dim, const uint32_t groupRank, const uint32_t groupSize)</td></tr>
<tr class="memdesc:a7135457ca312289c340f0fd05a53f6de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read aligned data entries for EmbedSOM projection.  <a href="embedsom__cuda__projection_8cu.html#a7135457ca312289c340f0fd05a53f6de">More...</a><br /></td></tr>
<tr class="separator:a7135457ca312289c340f0fd05a53f6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15fa36361b544732ab8a6e9b3d192aa2"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a15fa36361b544732ab8a6e9b3d192aa2"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a15fa36361b544732ab8a6e9b3d192aa2">readAlignedGrid2D</a> (F *const __restrict__ dst, const F *const __restrict__ src, const <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__ neighbors, const uint32_t n, const uint32_t groupRank, const uint32_t groupSize)</td></tr>
<tr class="memdesc:a15fa36361b544732ab8a6e9b3d192aa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of <a class="el" href="embedsom__cuda__projection_8cu.html#a7135457ca312289c340f0fd05a53f6de" title="Read aligned data entries for EmbedSOM projection.">readAligned()</a> for the 2D grid.  <a href="embedsom__cuda__projection_8cu.html#a15fa36361b544732ab8a6e9b3d192aa2">More...</a><br /></td></tr>
<tr class="separator:a15fa36361b544732ab8a6e9b3d192aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b951cf617d3d39e0f1bcc871183c45"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a23b951cf617d3d39e0f1bcc871183c45"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a23b951cf617d3d39e0f1bcc871183c45">storeToCache</a> (const uint32_t groupRank, const uint32_t groupSize, const F *const __restrict__ points, F *const __restrict__ pointsCache, const F *const __restrict__ grid, F *const __restrict__ gridCache, const F *const __restrict__ grid2d, F *const __restrict__ grid2dCache, const <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__ neighbors, const uint32_t dim, const uint32_t gridCacheLeadingDim, const uint32_t k)</td></tr>
<tr class="memdesc:a23b951cf617d3d39e0f1bcc871183c45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load data into shared memory cache.  <a href="embedsom__cuda__projection_8cu.html#a23b951cf617d3d39e0f1bcc871183c45">More...</a><br /></td></tr>
<tr class="separator:a23b951cf617d3d39e0f1bcc871183c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032cc0d823d81b0e9b74bebf933cb3ae"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a032cc0d823d81b0e9b74bebf933cb3ae"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a032cc0d823d81b0e9b74bebf933cb3ae">sortedDistsToScores</a> (<a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__ neighbors, const std::size_t adjustedK, const std::size_t k, const F boost)</td></tr>
<tr class="memdesc:a032cc0d823d81b0e9b74bebf933cb3ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute scores for a vector of sorted distances.  <a href="embedsom__cuda__projection_8cu.html#a032cc0d823d81b0e9b74bebf933cb3ae">More...</a><br /></td></tr>
<tr class="separator:a032cc0d823d81b0e9b74bebf933cb3ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af201df812b26dee992729a482fa418c9"><td class="memTemplParams" colspan="2">template&lt;typename F , class SCORE_STORAGE , class TILE &gt; </td></tr>
<tr class="memitem:af201df812b26dee992729a482fa418c9"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#af201df812b26dee992729a482fa418c9">sortedDistsToScoresGroup</a> (const TILE &amp;tile, SCORE_STORAGE storage, const std::size_t adjustedK, const std::size_t k, const F boost)</td></tr>
<tr class="memdesc:af201df812b26dee992729a482fa418c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the distances to scores using thread_block_tile and its built in functions for reduction and shuffle.  <a href="embedsom__cuda__projection_8cu.html#af201df812b26dee992729a482fa418c9">More...</a><br /></td></tr>
<tr class="separator:af201df812b26dee992729a482fa418c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2beb7b5b07b2bed637bc1a82164b4558"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a2beb7b5b07b2bed637bc1a82164b4558"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a2beb7b5b07b2bed637bc1a82164b4558">addGravity</a> (const F score, const F *const __restrict__ grid2DPoint, F *const __restrict__ mtx)</td></tr>
<tr class="memdesc:a2beb7b5b07b2bed637bc1a82164b4558"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add single-point approximation to the matrix.  <a href="embedsom__cuda__projection_8cu.html#a2beb7b5b07b2bed637bc1a82164b4558">More...</a><br /></td></tr>
<tr class="separator:a2beb7b5b07b2bed637bc1a82164b4558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb728202131aed555d3f721e736356f"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a3bb728202131aed555d3f721e736356f"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a3bb728202131aed555d3f721e736356f">addGravity2Wise</a> (const F score, const F *const __restrict__ grid2DPoint, F *const __restrict__ mtx)</td></tr>
<tr class="memdesc:a3bb728202131aed555d3f721e736356f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add single-point approximation to the matrix, on 2-vectors.  <a href="embedsom__cuda__projection_8cu.html#a3bb728202131aed555d3f721e736356f">More...</a><br /></td></tr>
<tr class="separator:a3bb728202131aed555d3f721e736356f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb7cc41361c8c53e7fa93ec40e8c1b5"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a6bb7cc41361c8c53e7fa93ec40e8c1b5"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ <a class="el" href="structVec.html">Vec</a>&lt; 2, F &gt;::Type&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a6bb7cc41361c8c53e7fa93ec40e8c1b5">euclideanProjection</a> (const F *const __restrict__ point, const F *const __restrict__ gridPointI, const F *const __restrict__ gridPointJ, const uint32_t dim)</td></tr>
<tr class="memdesc:a6bb7cc41361c8c53e7fa93ec40e8c1b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute a projection of the point to a line defined by points I and J.  <a href="embedsom__cuda__projection_8cu.html#a6bb7cc41361c8c53e7fa93ec40e8c1b5">More...</a><br /></td></tr>
<tr class="separator:a6bb7cc41361c8c53e7fa93ec40e8c1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6c9f7e3ff28904f206a5dbbe8bc393"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a7e6c9f7e3ff28904f206a5dbbe8bc393"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ <a class="el" href="structVec.html">Vec</a>&lt; 2, F &gt;::Type&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a7e6c9f7e3ff28904f206a5dbbe8bc393">euclideanProjection4Wise</a> (const F *const __restrict__ point, const F *const __restrict__ gridPointI, const F *const __restrict__ gridPointJ, const uint32_t dim)</td></tr>
<tr class="memdesc:a7e6c9f7e3ff28904f206a5dbbe8bc393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the projection on 4-vectors.  <a href="embedsom__cuda__projection_8cu.html#a7e6c9f7e3ff28904f206a5dbbe8bc393">More...</a><br /></td></tr>
<tr class="separator:a7e6c9f7e3ff28904f206a5dbbe8bc393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c055d22030a1a05f2b9bf56d12b6bd2"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a5c055d22030a1a05f2b9bf56d12b6bd2"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a5c055d22030a1a05f2b9bf56d12b6bd2">addApproximation</a> (const F scoreI, const F scoreJ, const F *const __restrict__ grid2DPointI, const F *const __restrict__ grid2DPointJ, const F adjust, const F scalarProjection, F *const __restrict__ mtx)</td></tr>
<tr class="memdesc:a5c055d22030a1a05f2b9bf56d12b6bd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the result of projections to the approximation matrix.  <a href="embedsom__cuda__projection_8cu.html#a5c055d22030a1a05f2b9bf56d12b6bd2">More...</a><br /></td></tr>
<tr class="separator:a5c055d22030a1a05f2b9bf56d12b6bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c367f2ec055679e7a2382b1b8046379"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a5c367f2ec055679e7a2382b1b8046379"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a5c367f2ec055679e7a2382b1b8046379">addApproximation2Wise</a> (const F scoreI, const F scoreJ, const F *const __restrict__ grid2DPointI, const F *const __restrict__ grid2DPointJ, const F adjust, const F scalarProjection, F *const __restrict__ mtx)</td></tr>
<tr class="memdesc:a5c367f2ec055679e7a2382b1b8046379"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="embedsom__cuda__projection_8cu.html#a5c055d22030a1a05f2b9bf56d12b6bd2" title="Add the result of projections to the approximation matrix.">addApproximation()</a>, on 2-vectors.  <a href="embedsom__cuda__projection_8cu.html#a5c367f2ec055679e7a2382b1b8046379">More...</a><br /></td></tr>
<tr class="separator:a5c367f2ec055679e7a2382b1b8046379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fb11cca59bf3cf01e76bbd7a929193b"><td class="memTemplParams" colspan="2">template&lt;typename INDEXER &gt; </td></tr>
<tr class="memitem:a0fb11cca59bf3cf01e76bbd7a929193b"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ uint2&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a0fb11cca59bf3cf01e76bbd7a929193b">getIndices</a> (uint32_t plainIndex, uint32_t k)</td></tr>
<tr class="memdesc:a0fb11cca59bf3cf01e76bbd7a929193b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function template for getting indexes.  <a href="embedsom__cuda__projection_8cu.html#a0fb11cca59bf3cf01e76bbd7a929193b">More...</a><br /></td></tr>
<tr class="separator:a0fb11cca59bf3cf01e76bbd7a929193b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219581f1c9d697c623a170ec6650bc1f"><td class="memItemLeft" align="right" valign="top">template&lt;&gt; </td></tr>
<tr class="memitem:a219581f1c9d697c623a170ec6650bc1f"><td class="memTemplItemLeft" align="right" valign="top">__inline__ __device__ uint2&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a219581f1c9d697c623a170ec6650bc1f">getIndices&lt; RectangleIndexer &gt;</a> (uint32_t plainIndex, uint32_t k)</td></tr>
<tr class="memdesc:a219581f1c9d697c623a170ec6650bc1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialization of getIndices for the rectangle indexing.  <a href="embedsom__cuda__projection_8cu.html#a219581f1c9d697c623a170ec6650bc1f">More...</a><br /></td></tr>
<tr class="separator:a219581f1c9d697c623a170ec6650bc1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5941879f44776cd703fee97c694cd0a7"><td class="memTemplParams" colspan="2">template&lt;typename F &gt; </td></tr>
<tr class="memitem:a5941879f44776cd703fee97c694cd0a7"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a5941879f44776cd703fee97c694cd0a7">projectionBaseKernel</a> (const F *__restrict__ points, const F *const __restrict__ grid, const F *const __restrict__ grid2d, <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *__restrict__ neighbors, F *__restrict__ projections, const uint32_t dim, const uint32_t n, const uint32_t gridSize, const uint32_t k, const F adjust, const F boost)</td></tr>
<tr class="memdesc:a5941879f44776cd703fee97c694cd0a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base projection kernel (each thread does everything for a single point).  <a href="embedsom__cuda__projection_8cu.html#a5941879f44776cd703fee97c694cd0a7">More...</a><br /></td></tr>
<tr class="separator:a5941879f44776cd703fee97c694cd0a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d1224a3e2802ae53b7eb3f3f2a38c5"><td class="memTemplParams" colspan="2">template&lt;typename F , typename INDEXER , size_t tileSize&gt; </td></tr>
<tr class="memitem:a15d1224a3e2802ae53b7eb3f3f2a38c5"><td class="memTemplItemLeft" align="right" valign="top">__global__ void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="embedsom__cuda__projection_8cu.html#a15d1224a3e2802ae53b7eb3f3f2a38c5">projectionAlignedShMemoryKernel</a> (const F *__restrict__ points, const F *const __restrict__ grid, const F *const __restrict__ grid2d, <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *__restrict__ neighbors, F *__restrict__ projections, const uint32_t dim, const uint32_t n, const uint32_t gridSize, const uint32_t k, const F adjust, const F boost, const uint32_t groupSize, const uint32_t cacheLeadingDim)</td></tr>
<tr class="memdesc:a15d1224a3e2802ae53b7eb3f3f2a38c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aligned-shared-memory projection kernel.  <a href="embedsom__cuda__projection_8cu.html#a15d1224a3e2802ae53b7eb3f3f2a38c5">More...</a><br /></td></tr>
<tr class="separator:a15d1224a3e2802ae53b7eb3f3f2a38c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3de890e3fb681b02368e411be8c1b2cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3de890e3fb681b02368e411be8c1b2cd">&#9670;&nbsp;</a></span>_CG_ABI_EXPERIMENTAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _CG_ABI_EXPERIMENTAL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00032">32</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a89700ffad5ff8c1c57a1226a1cbcdd95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89700ffad5ff8c1c57a1226a1cbcdd95">&#9670;&nbsp;</a></span>DOIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DOIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">X</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    tmp = tmpGridJ.X - tmpGridI.X;                                             \</div>
<div class="line">    result.y += tmp * tmp;                                                     \</div>
<div class="line">    result.x += tmp * (tmpPoint.X - tmpGridI.X)</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5c055d22030a1a05f2b9bf56d12b6bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c055d22030a1a05f2b9bf56d12b6bd2">&#9670;&nbsp;</a></span>addApproximation()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void addApproximation </td>
          <td>(</td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>scoreI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>scoreJ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2DPointI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2DPointJ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>adjust</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>scalarProjection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>mtx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the result of projections to the approximation matrix. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00379">379</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a5c055d22030a1a05f2b9bf56d12b6bd2_icgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a5c055d22030a1a05f2b9bf56d12b6bd2_icgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a5c055d22030a1a05f2b9bf56d12b6bd2_icgraph" id="aembedsom__cuda__projection_8cu_a5c055d22030a1a05f2b9bf56d12b6bd2_icgraph">
<area shape="rect" title="Add the result of projections to the approximation matrix." alt="" coords="199,5,325,32"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a5941879f44776cd703fee97c694cd0a7" title="Base projection kernel (each thread does everything for a single point)." alt="" coords="5,5,151,32"/>
</map>
</div>

</div>
</div>
<a id="a5c367f2ec055679e7a2382b1b8046379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c367f2ec055679e7a2382b1b8046379">&#9670;&nbsp;</a></span>addApproximation2Wise()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void addApproximation2Wise </td>
          <td>(</td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>scoreI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>scoreJ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2DPointI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2DPointJ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>adjust</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>scalarProjection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>mtx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as <a class="el" href="embedsom__cuda__projection_8cu.html#a5c055d22030a1a05f2b9bf56d12b6bd2" title="Add the result of projections to the approximation matrix.">addApproximation()</a>, on 2-vectors. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00415">415</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a5c367f2ec055679e7a2382b1b8046379_icgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a5c367f2ec055679e7a2382b1b8046379_icgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a5c367f2ec055679e7a2382b1b8046379_icgraph" id="aembedsom__cuda__projection_8cu_a5c367f2ec055679e7a2382b1b8046379_icgraph">
<area shape="rect" title="Same as addApproximation(), on 2&#45;vectors." alt="" coords="237,13,400,39"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a15d1224a3e2802ae53b7eb3f3f2a38c5" title="Aligned&#45;shared&#45;memory projection kernel." alt="" coords="5,5,189,47"/>
</map>
</div>

</div>
</div>
<a id="a2beb7b5b07b2bed637bc1a82164b4558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2beb7b5b07b2bed637bc1a82164b4558">&#9670;&nbsp;</a></span>addGravity()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void addGravity </td>
          <td>(</td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2DPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>mtx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add single-point approximation to the matrix. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00285">285</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a2beb7b5b07b2bed637bc1a82164b4558_icgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a2beb7b5b07b2bed637bc1a82164b4558_icgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a2beb7b5b07b2bed637bc1a82164b4558_icgraph" id="aembedsom__cuda__projection_8cu_a2beb7b5b07b2bed637bc1a82164b4558_icgraph">
<area shape="rect" title="Add single&#45;point approximation to the matrix." alt="" coords="199,5,284,32"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a5941879f44776cd703fee97c694cd0a7" title="Base projection kernel (each thread does everything for a single point)." alt="" coords="5,5,151,32"/>
</map>
</div>

</div>
</div>
<a id="a3bb728202131aed555d3f721e736356f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb728202131aed555d3f721e736356f">&#9670;&nbsp;</a></span>addGravity2Wise()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void addGravity2Wise </td>
          <td>(</td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>score</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2DPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>mtx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add single-point approximation to the matrix, on 2-vectors. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00300">300</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a3bb728202131aed555d3f721e736356f_icgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a3bb728202131aed555d3f721e736356f_icgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a3bb728202131aed555d3f721e736356f_icgraph" id="aembedsom__cuda__projection_8cu_a3bb728202131aed555d3f721e736356f_icgraph">
<area shape="rect" title="Add single&#45;point approximation to the matrix, on 2&#45;vectors." alt="" coords="237,13,360,39"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a15d1224a3e2802ae53b7eb3f3f2a38c5" title="Aligned&#45;shared&#45;memory projection kernel." alt="" coords="5,5,189,47"/>
</map>
</div>

</div>
</div>
<a id="a6bb7cc41361c8c53e7fa93ec40e8c1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb7cc41361c8c53e7fa93ec40e8c1b5">&#9670;&nbsp;</a></span>euclideanProjection()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ <a class="el" href="structVec.html">Vec</a>&lt;2, F&gt;::Type euclideanProjection </td>
          <td>(</td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>gridPointI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>gridPointJ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>dim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute a projection of the point to a line defined by points I and J. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00318">318</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a7e6c9f7e3ff28904f206a5dbbe8bc393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e6c9f7e3ff28904f206a5dbbe8bc393">&#9670;&nbsp;</a></span>euclideanProjection4Wise()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ <a class="el" href="structVec.html">Vec</a>&lt;2, F&gt;::Type euclideanProjection4Wise </td>
          <td>(</td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>gridPointI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>gridPointJ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>dim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the projection on 4-vectors. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00335">335</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a0fb11cca59bf3cf01e76bbd7a929193b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fb11cca59bf3cf01e76bbd7a929193b">&#9670;&nbsp;</a></span>getIndices()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename INDEXER &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ uint2 getIndices </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>plainIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function template for getting indexes. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00469">469</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a219581f1c9d697c623a170ec6650bc1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a219581f1c9d697c623a170ec6650bc1f">&#9670;&nbsp;</a></span>getIndices&lt; RectangleIndexer &gt;()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ uint2 <a class="el" href="embedsom__cuda__projection_8cu.html#a0fb11cca59bf3cf01e76bbd7a929193b">getIndices</a>&lt; <a class="el" href="structRectangleIndexer.html">RectangleIndexer</a> &gt; </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>plainIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specialization of getIndices for the rectangle indexing. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00474">474</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a15d1224a3e2802ae53b7eb3f3f2a38c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15d1224a3e2802ae53b7eb3f3f2a38c5">&#9670;&nbsp;</a></span>projectionAlignedShMemoryKernel()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F , typename INDEXER , size_t tileSize&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__global__ void projectionAlignedShMemoryKernel </td>
          <td>(</td>
          <td class="paramtype">const F *__restrict__&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *__restrict__&#160;</td>
          <td class="paramname"><em>neighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *__restrict__&#160;</td>
          <td class="paramname"><em>projections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>gridSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>adjust</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>boost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>groupSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>cacheLeadingDim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aligned-shared-memory projection kernel. </p>
<p>One block computes embedding for one point, using CUB block reduce for matrix reduction. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00551">551</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a15d1224a3e2802ae53b7eb3f3f2a38c5_cgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a15d1224a3e2802ae53b7eb3f3f2a38c5_cgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a15d1224a3e2802ae53b7eb3f3f2a38c5_cgraph" id="aembedsom__cuda__projection_8cu_a15d1224a3e2802ae53b7eb3f3f2a38c5_cgraph">
<area shape="rect" title="Aligned&#45;shared&#45;memory projection kernel." alt="" coords="5,49,189,90"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a5c367f2ec055679e7a2382b1b8046379" title="Same as addApproximation(), on 2&#45;vectors." alt="" coords="237,5,400,32"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a3bb728202131aed555d3f721e736356f" title="Add single&#45;point approximation to the matrix, on 2&#45;vectors." alt="" coords="257,56,380,83"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a23b951cf617d3d39e0f1bcc871183c45" title="Load data into shared memory cache." alt="" coords="267,107,370,133"/>
</map>
</div>

</div>
</div>
<a id="a5941879f44776cd703fee97c694cd0a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5941879f44776cd703fee97c694cd0a7">&#9670;&nbsp;</a></span>projectionBaseKernel()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__global__ void projectionBaseKernel </td>
          <td>(</td>
          <td class="paramtype">const F *__restrict__&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *__restrict__&#160;</td>
          <td class="paramname"><em>neighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *__restrict__&#160;</td>
          <td class="paramname"><em>projections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>gridSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>adjust</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>boost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Base projection kernel (each thread does everything for a single point). </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00489">489</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a5941879f44776cd703fee97c694cd0a7_cgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a5941879f44776cd703fee97c694cd0a7_cgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a5941879f44776cd703fee97c694cd0a7_cgraph" id="aembedsom__cuda__projection_8cu_a5941879f44776cd703fee97c694cd0a7_cgraph">
<area shape="rect" title="Base projection kernel (each thread does everything for a single point)." alt="" coords="5,31,151,57"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a5c055d22030a1a05f2b9bf56d12b6bd2" title="Add the result of projections to the approximation matrix." alt="" coords="199,5,325,32"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a2beb7b5b07b2bed637bc1a82164b4558" title="Add single&#45;point approximation to the matrix." alt="" coords="219,56,305,83"/>
</map>
</div>

</div>
</div>
<a id="a7135457ca312289c340f0fd05a53f6de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7135457ca312289c340f0fd05a53f6de">&#9670;&nbsp;</a></span>readAligned()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F , typename ArrayF &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void readAligned </td>
          <td>(</td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__&#160;</td>
          <td class="paramname"><em>neighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>groupRank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>groupSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read aligned data entries for EmbedSOM projection. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00105">105</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a15fa36361b544732ab8a6e9b3d192aa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15fa36361b544732ab8a6e9b3d192aa2">&#9670;&nbsp;</a></span>readAlignedGrid2D()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void readAlignedGrid2D </td>
          <td>(</td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__&#160;</td>
          <td class="paramname"><em>neighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>groupRank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>groupSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Version of <a class="el" href="embedsom__cuda__projection_8cu.html#a7135457ca312289c340f0fd05a53f6de" title="Read aligned data entries for EmbedSOM projection.">readAligned()</a> for the 2D grid. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00132">132</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a032cc0d823d81b0e9b74bebf933cb3ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a032cc0d823d81b0e9b74bebf933cb3ae">&#9670;&nbsp;</a></span>sortedDistsToScores()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void sortedDistsToScores </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__&#160;</td>
          <td class="paramname"><em>neighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>adjustedK</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>boost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute scores for a vector of sorted distances. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00184">184</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a032cc0d823d81b0e9b74bebf933cb3ae_cgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a032cc0d823d81b0e9b74bebf933cb3ae_cgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a032cc0d823d81b0e9b74bebf933cb3ae_cgraph" id="aembedsom__cuda__projection_8cu_a032cc0d823d81b0e9b74bebf933cb3ae_cgraph">
<area shape="rect" title="Compute scores for a vector of sorted distances." alt="" coords="5,5,149,32"/>
<area shape="rect" href="landmark__model_8cpp.html#ab6763afd4f74a9070a812b7a57fc1f4e" title=" " alt="" coords="197,5,268,32"/>
</map>
</div>

</div>
</div>
<a id="af201df812b26dee992729a482fa418c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af201df812b26dee992729a482fa418c9">&#9670;&nbsp;</a></span>sortedDistsToScoresGroup()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F , class SCORE_STORAGE , class TILE &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void sortedDistsToScoresGroup </td>
          <td>(</td>
          <td class="paramtype">const TILE &amp;&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SCORE_STORAGE&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>adjustedK</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F&#160;</td>
          <td class="paramname"><em>boost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the distances to scores using thread_block_tile and its built in functions for reduction and shuffle. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00222">222</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
<a id="a23b951cf617d3d39e0f1bcc871183c45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b951cf617d3d39e0f1bcc871183c45">&#9670;&nbsp;</a></span>storeToCache()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ void storeToCache </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>groupRank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>groupSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>pointsCache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>gridCache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F *const __restrict__&#160;</td>
          <td class="paramname"><em>grid2dCache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structknn__entry.html">knn_entry</a>&lt; F &gt; *const __restrict__&#160;</td>
          <td class="paramname"><em>neighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>gridCacheLeadingDim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load data into shared memory cache. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00151">151</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="embedsom__cuda__projection_8cu_a23b951cf617d3d39e0f1bcc871183c45_icgraph.png" border="0" usemap="#aembedsom__cuda__projection_8cu_a23b951cf617d3d39e0f1bcc871183c45_icgraph" alt=""/></div>
<map name="aembedsom__cuda__projection_8cu_a23b951cf617d3d39e0f1bcc871183c45_icgraph" id="aembedsom__cuda__projection_8cu_a23b951cf617d3d39e0f1bcc871183c45_icgraph">
<area shape="rect" title="Load data into shared memory cache." alt="" coords="237,13,340,39"/>
<area shape="rect" href="embedsom__cuda__projection_8cu.html#a15d1224a3e2802ae53b7eb3f3f2a38c5" title="Aligned&#45;shared&#45;memory projection kernel." alt="" coords="5,5,189,47"/>
</map>
</div>

</div>
</div>
<a id="a876c79c4c56f79e98a0b8bfa28cb347a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a876c79c4c56f79e98a0b8bfa28cb347a">&#9670;&nbsp;</a></span>warpReduceSum()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename F &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">__inline__ __device__ F warpReduceSum </td>
          <td>(</td>
          <td class="paramtype">F&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sum a value across the warp. </p>

<p class="definition">Definition at line <a class="el" href="embedsom__cuda__projection_8cu_source.html#l00095">95</a> of file <a class="el" href="embedsom__cuda__projection_8cu_source.html">embedsom_cuda_projection.cu</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
